{% extends 'document.html' %}

{% block sdocument %}
<h1 id="kubic-open-api-개요">KUBIC Open API 개요</h1>
<h2 id="open-api란-무엇인가">Open API란 무엇인가?</h2>
<p>API란 Application Programming Interface의 준말로 응용 프로그램에서 정보를 전달하고 전달받는 방법을 의미한다. 즉, 프로그램과 프로그램 사이에 정보를 전달할 수 있게 해주는 연결고리의 역할을 한다. API는 공개여부에 따라 비공개 API와 Open API로 나뉜다. 그 중 Open API는 제공자의 기능 또는 콘텐츠를 외부 개발자가 HTTP규약을 통해 호출하여 이용할 수 있도록 한 API를 말한다.</p>
<h2 id="kubic-api의-특징">KUBIC API의 특징</h2>
<p>KUBIC API는 한동대학교 통일빅데이터센터에서 2020년 8월부터 개발된 Open Data API 서비스로, 통일 관련 자료들에 대해 세 가지 데이터 검색(단순 키워드 검색, 상세 검색, 내 보관함 내 검색) 서비스를 제공한다. REST(GET) 방식을 채택하고 있어 사용자가 해당 URI에 대해 GET 요청을 보내오면 요청에 맞는 Json formatted Data를 응답한다. 데이터는 실시간으로 업데이트 된다.</p>
<h2 id="서비스-이용-절차">서비스 이용 절차</h2>
<p>KUBIC Data API를 이용하기 위해서는 활용 신청, 인증, 호출의 세 가지 절차를 거쳐야 한다.</p>
<ol>
<li>활용 신청<br>
활용 신청은 외부 개발자들은 인증키(Service Key 또는 Secret Key)를 제공받고, API제공자는 API이용자들을 관리하기 위해 필요한 절차이다. 본 사이트의 왼쪽 활용 신청 탭에서 사용할 API의 이름과 사용 목적 등을 입력하여 제출 후 신청을 마치면 API는 자동으로 승인이 되며 인증키가 발급된다.</li>
<li>인증<br>
인증은 인증키를 이용하여 사용자가 유효한 사용자임을 인증하는 절차이다. API에 요청 메세지를 보낼 때 활용 신청에서 발급된 인증키를 serviceKey 변수에 입력하면 인증이 완료된다.</li>
<li>호출<br>
호출은 본격적으로 API에 요청 메세지를 보냄으로써 원하는 응답을 얻어오는 절차이다. 호출할 때에는 요청 URL(Request URL)과 요청 변수(Request Parameter)들를 전송 형식에 맞춰 보낸다. 정해진 형식에 맞추어 응답이 오면 응답을 Parsing하여 이용한다. 이 과정에서는 서비스 상세란에서 상세히 기술된 요청 변수, 응답 변수, 결과 코드를 읽고 적절히 활용하면 된다.</li>
</ol>
<h1 id="서비스-상세">서비스 상세</h1>
<ol>
<li>상세 검색</li>
</ol>
<h2 id="url-httpkubicorgglobalsearch">URL: http:/kubic.org/globalSearch?</h2>
<h2 id="요청-변수">요청 변수</h2>
<table>
<thead>
<tr>
<th>변수명(영문)</th>
<th>변수명(국문)</th>
<th>필수 여부</th>
<th>형식</th>
<th>예시</th>
<th>Default값</th>
</tr>
</thead>
<tbody>
<tr>
<td>serviceKey</td>
<td>인증키</td>
<td>Y</td>
<td>16 bytes String</td>
<td>kvgjI4BaEQ4uDr22xaAIhA</td>
<td>-</td>
</tr>
<tr>
<td>numOfContents</td>
<td>검색할 최대 개수</td>
<td>N</td>
<td>Int</td>
<td>500</td>
<td>100</td>
</tr>
<tr>
<td>rank</td>
<td>정렬 기준</td>
<td>N</td>
<td>Int</td>
<td>2(인기순)</td>
<td>1(최신순)</td>
</tr>
<tr>
<td>keyInTitle</td>
<td>제목 내 검색</td>
<td>Y</td>
<td>String</td>
<td>북핵</td>
<td>-</td>
</tr>
<tr>
<td>keyInBody</td>
<td>내용 내 검색</td>
<td>N</td>
<td>Int</td>
<td>문재인</td>
<td>-</td>
</tr>
<tr>
<td>writer</td>
<td>작성자 검색</td>
<td>N</td>
<td>String</td>
<td>홍길동</td>
<td>-</td>
</tr>
<tr>
<td>startDate</td>
<td>작성일 기간시작점</td>
<td>N</td>
<td>YYYY-MM-DD</td>
<td>2018-09-17</td>
<td>1년 전</td>
</tr>
<tr>
<td>endDate</td>
<td>작성일 기간끝점</td>
<td>N</td>
<td>YYYY-MM-DD</td>
<td>2020-09-17</td>
<td>Today</td>
</tr>
<tr>
<td>institution</td>
<td>발행한 기관명</td>
<td>N</td>
<td>String</td>
<td>북한연구소</td>
<td>-</td>
</tr>
<tr>
<td>category</td>
<td>분류</td>
<td>N</td>
<td>String</td>
<td>정치</td>
<td>-</td>
</tr>
</tbody>
</table>
<h2 id="요청-예시">요청 예시</h2>
<pre><code><code><div>전체검색(globalSearch)에서 제목에 ‘북핵’, 내용에 ‘문재인’이 포함되고 2017년과 2020년 사이에 게시된 자료를 찾는 경우&gt;
http://kubic.org/globalSearch?serviceKey=BmBFV2vhwRaiT9&amp;title=북핵&amp;body=문재인&amp;StartDate=20170101&amp;EndDate=20210101
</div></code></code></pre>
<h2 id="응답-변수">응답 변수</h2>
<table>
<thead>
<tr>
<th>변수명(영문)</th>
<th>변수명(국문)</th>
</tr>
</thead>
<tbody>
<tr>
<td>resultCode</td>
<td>결과 코드</td>
</tr>
<tr>
<td>resultMSG</td>
<td>결과 메세지</td>
</tr>
<tr>
<td>numOfContents</td>
<td>검색할 최대 개수</td>
</tr>
<tr>
<td>totalCount</td>
<td>검색된 자료 개수</td>
</tr>
<tr>
<td>rank</td>
<td>정렬 기준</td>
</tr>
<tr>
<td>title</td>
<td>제목</td>
</tr>
<tr>
<td>body</td>
<td>내용</td>
</tr>
<tr>
<td>writer</td>
<td>작성자</td>
</tr>
<tr>
<td>date</td>
<td>작성일</td>
</tr>
<tr>
<td>originalURL</td>
<td>원본 문서 URL</td>
</tr>
<tr>
<td>institution</td>
<td>발행 기관명</td>
</tr>
<tr>
<td>institutionURL</td>
<td>발행 기관 URL</td>
</tr>
<tr>
<td>category</td>
<td>분류</td>
</tr>
<tr>
<td>fileName</td>
<td>첨부 파일 이름</td>
</tr>
<tr>
<td>fileURL</td>
<td>첨부 파일 URL</td>
</tr>
<tr>
<td>fileContent</td>
<td>첨부 파일 내용</td>
</tr>
</tbody>
</table>
<h2 id="응답-예시">응답 예시</h2>
<pre><code><code><div>{
    &quot;response&quot;:{
       &quot;header&quot;:{
          &quot;resultCode&quot;:&quot;00&quot;,
          &quot;resultMSG&quot;:&quot;NORMAL_SERVICE&quot;
       },
       &quot;body&quot;:{
            &quot;numOfContents&quot;:&quot;100&quot;,
            &quot;totalCount&quot;: &quot;95&quot;,
            &quot;rank&quot;: &quot;1&quot;,
            &quot;contents&quot;:[
                {
                    &quot;Title&quot;:&quot;북핵에 관하여&quot;,
                    &quot;Body&quot;:&quot;문재인이 북핵에 관하여 연설했다.&quot;,
                    &quot;Writer&quot;: &quot;홍길동 기자&quot;,
                    &quot;Date&quot;:&quot;20200917&quot;,
                    &quot;Institution&quot;:&quot;북한연구소 본사&quot;,
                    &quot;InstitutionURL&quot;:&quot;https://BukHan.co.kr&quot;,
                    &quot;Category&quot;:&quot;정치&quot;,
                    &quot;FileURL&quot;:&quot;NULL&quot;
                },
			{…},{…}…
            ]
        }
    }
}
</div></code></code></pre>
<h2 id="활용-예시">활용 예시</h2>
<h3 id="python">Python</h3>
<pre><code><code><div>import urllib.request as r
import urllib.parse as p
import json
import pandas as pd

url = &quot;http://kubic.org:5000/globalSearch?&quot;
serviceKey = &quot;WF4YJ1-RxrXoiulsWjoLpg&quot;

option = &quot;serviceKey=&quot;+serviceKey
request = &quot;&amp;title=&quot;+p.quote(title)+&quot;&amp;body=&quot;+p.quote(body)
url_full = url + option + request

print(&quot;url&gt;&quot;+url_full)
response = r.urlopen(url_full).read().decode('utf-8')
print(response)

jsonArray = json.loads(response) 

if jsonArray.get(&quot;response&quot;).get(&quot;header&quot;).get(&quot;resultCode&quot;) != '200':
    print(&quot;Error!!!&quot;)
    print(jsonArray.get(&quot;header&quot;))
    quit()

    items =jsonArray.get(&quot;response&quot;).get(&quot;body&quot;).get(&quot;contents&quot;)
    print(&quot;items&gt;&quot;, items)

df = pd.DataFrame(columns=['title','body','writer','date','category','institution','file'])
for item in items:
    df = df.append(item,ignore_index=True)
print(df)
</div></code></code></pre>
<h2 id="결과-코드">결과 코드</h2>
<table>
<thead>
<tr>
<th>결과 코드</th>
<th>결과 메세지</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>요청이 성공적으로 응답되었습니다.</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
<td>요청은 정상적이지만 컨텐츠는 없습니다.</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>잘못된 문법으로 인하여 서버가 요청을 이해할 수 없습니다.(파라미터 대소문자 확인 요망)</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>클라이언트가 인증되지 않았습니다.(인증키 확인 요망)</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway</td>
<td>서버가 게이트웨이로부터 잘못된 응답을 수신했습니다.(개발자에게 연락 요망)</td>
</tr>
</tbody>
</table>



{% endblock %}